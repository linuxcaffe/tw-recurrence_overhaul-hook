Logging to: /home/djp/.task/hooks/recurrence/test/logs/run-20260114-202502-001.txt
Run ID: 20260114-202502-001

â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Taskwarrior Enhanced Recurrence - Test Suite v0.5.0
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Setting up test environment
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
[INFO] Test directory: /tmp/taskwarrior-recurrence-test-3332741
[INFO] Hooks: on-exit v0.5.4, on-add v0.5.4
[INFO] Run ID: 20260114-202502-001
[INFO] All test tasks tagged: project:tw.rec.test +test +dummy run:20260114-202502-001
[INFO] Tests will run in isolated environment
[INFO] Debug mode ENABLED - hook logs: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Running Tests
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
[TEST] Basic template creation
[PASS] Template created
[PASS] First instance created (count: 1)
[PASS] Safety tag +test present
[TEST] Type abbreviations
[PASS] All abbreviations accepted (7/7)
[TEST] Chained tasks reject 'until' dates
[FAIL] Chained + until should be rejected
[DEBUG] Additional context:
  Created recurrence template. First instance will be generated on exit.
[TEST] Periodic instance #1 matches template due date
[DEBUG] Templates JSON: [
  {
    "id": 1,
    "description": "[run-20260114-202502-001] Basic test",
    "due": "20260115T050000Z",
    "entry": "20260115T012502Z",
    "modified": "20260115T012502Z",
    "project": "tw.rec.test",
    "r": "P7D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "periodic",
    "uuid": "382fd272-9cc9-4cdb-990a-1289b8cf3c60",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 10.6318
  },
  {
    "id": 3,
    "description": "[run-20260114-202502-001] Test c",
    "due": "20260114T050000Z",
    "entry": "20260115T012502Z",
    "modified": "20260115T012502Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "chained",
    "uuid": "cd3b6a1e-f2ac-410a-8520-0d95a3e2f0f2",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 5,
    "description": "[run-20260114-202502-001] Test ch",
    "due": "20260114T050000Z",
    "entry": "20260115T012502Z",
    "modified": "20260115T012502Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "chained",
    "uuid": "c9794349-b8cd-4109-a95b-5bc7dddd07fd",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 7,
    "description": "[run-20260114-202502-001] Test chai",
    "due": "20260114T050000Z",
    "entry": "20260115T012502Z",
    "modified": "20260115T012502Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "chained",
    "uuid": "8d948d51-9a99-4246-a687-1bae6e7ace09",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 9,
    "description": "[run-20260114-202502-001] Test chained",
    "due": "20260114T050000Z",
    "entry": "20260115T012502Z",
    "modified": "20260115T012502Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "chained",
    "uuid": "decbe8f9-66b6-4798-999c-2b0c09652544",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 11,
    "description": "[run-20260114-202502-001] Test p",
    "due": "20260114T050000Z",
    "entry": "20260115T012503Z",
    "modified": "20260115T012503Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "periodic",
    "uuid": "b620552c-eddd-4d64-83d4-4ca900793c41",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 13,
    "description": "[run-20260114-202502-001] Test per",
    "due": "20260114T050000Z",
    "entry": "20260115T012503Z",
    "modified": "20260115T012503Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "periodic",
    "uuid": "ba30349a-a679-4a47-bc89-aa7088b3c16d",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 15,
    "description": "[run-20260114-202502-001] Test periodic",
    "due": "20260114T050000Z",
    "entry": "20260115T012503Z",
    "modified": "20260115T012503Z",
    "project": "tw.rec.test",
    "r": "P1D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "periodic",
    "uuid": "22a06d3b-cd62-4f16-8f4f-aec13ed19713",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 11.0889
  },
  {
    "id": 17,
    "description": "[run-20260114-202502-001] Bad chained",
    "due": "20260115T050000Z",
    "entry": "20260115T012503Z",
    "modified": "20260115T012503Z",
    "project": "tw.rec.test",
    "r": "P7D",
    "ranchor": "due",
    "rlast": 1,
    "rtype": "periodic",
    "status": "recurring",
    "type": "chained",
    "until": "20260201T045959Z",
    "uuid": "f03ae830-ea99-44c6-aa69-e53b2689c693",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 10.6318
  },
  {
    "id": 19,
    "description": "[run-20260114-202502-001] Due test",
    "due": "20250215T050000Z",
    "entry": "20260115T012503Z",
    "modified": "20260115T012503Z",
    "project": "tw.rec.test",
    "r": "P30D",
    "ranchor": "due",
    "rlast": 12,
    "rtype": "periodic",
    "status": "recurring",
    "type": "periodic",
    "uuid": "920a0aa2-134e-47f3-a241-0dc1f7f6484c",
    "tags": [
      "dummy",
      "test"
    ],
    "urgency": 13.9
  }
]
[FAIL] Instance due () != template (20250215T050000Z)
[TEST] Safety tags present on all tasks
[PASS] All 20 tasks have safety tags
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Multi-Iteration Tests
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
[TEST] Chained recurrence - 3 iterations
[DEBUG] Template creation output: Created recurrence template. First instance will be generated on exit.
[DEBUG] Checking for recurring tasks...
[DEBUG] Recurring task count: 0
[DEBUG] Searching templates for 'Chained test'
[FAIL] Could not find template UUID
[DEBUG] Available templates:
  Unable to find report that matches 'status:recurring'.
[TEST] Periodic recurrence - 3 iterations
[FAIL] Could not find template UUID
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Message Tests
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
[TEST] Delete instance shows warning message
[FAIL] Could not find template
[TEST] Complete template shows warning with pending instance IDs
[FAIL] Could not find template
[TEST] Delete template shows warning with pending instance IDs
[FAIL] Could not find template
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Test Summary
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
Total tests:  10
Passed:       5
Failed:       7

Results saved to: /home/djp/.task/hooks/recurrence/test/logs/run-20260114-202502-001.txt

âœ— Some tests failed

â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
  Cleaning up
â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�â•�
[HOOK LOG] Last 50 lines:
  [2026-01-14 20:25:10] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:10] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
  [2026-01-14 20:25:10] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:10] EXIT: Found new template: [run-20260114-202502-001] Delete msg test
  [2026-01-14 20:25:10] EXIT: Creating instance 1 from d2a80d54-ee83-4754-8651-48561722854f
  [2026-01-14 20:25:10] EXIT: Instance command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data rc.hooks=off add [run-20260114-202502-001] Delete msg test due:20260115T012517Z project:tw.rec.test +dummy +test rtemplate:d2a80d54-ee83-4754-8651-48561722854f rindex:1
  [2026-01-14 20:25:10] EXIT: Instance 1 created successfully
  [2026-01-14 20:25:10] EXIT: on-exit completed
  [2026-01-14 20:25:12] ADD/MOD: ============================================================
  [2026-01-14 20:25:12] ADD/MOD: Hook starting
  [2026-01-14 20:25:12] ADD/MOD: TASKRC: /tmp/taskwarrior-recurrence-test-3332741/taskrc
  [2026-01-14 20:25:12] ADD/MOD: TASKDATA: /tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:12] ADD/MOD: LOG_FILE: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
  [2026-01-14 20:25:12] ADD/MOD: Mode: ADD, lines: 1
  [2026-01-14 20:25:12] ADD/MOD: Creating template: [run-20260114-202502-001] Complete template test
  [2026-01-14 20:25:12] ADD/MOD:   Type: periodic, r=PT5S
  [2026-01-14 20:25:12] ADD/MOD:   Template created: status=recurring, rlast=0
  [2026-01-14 20:25:12] ADD/MOD: Hook completed
  [2026-01-14 20:25:12] EXIT: ============================================================
  [2026-01-14 20:25:12] EXIT: on-exit hook started
  [2026-01-14 20:25:12] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3332741/taskrc
  [2026-01-14 20:25:12] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:12] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
  [2026-01-14 20:25:12] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:12] EXIT: Found new template: [run-20260114-202502-001] Complete template test
  [2026-01-14 20:25:12] EXIT: Creating instance 1 from 38cda455-4745-4118-9327-c44e7f797db6
  [2026-01-14 20:25:12] EXIT: Instance command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data rc.hooks=off add [run-20260114-202502-001] Complete template test due:20260115T012519Z project:tw.rec.test +dummy +test rtemplate:38cda455-4745-4118-9327-c44e7f797db6 rindex:1
  [2026-01-14 20:25:12] EXIT: Instance 1 created successfully
  [2026-01-14 20:25:12] EXIT: on-exit completed
  [2026-01-14 20:25:14] ADD/MOD: ============================================================
  [2026-01-14 20:25:14] ADD/MOD: Hook starting
  [2026-01-14 20:25:14] ADD/MOD: TASKRC: /tmp/taskwarrior-recurrence-test-3332741/taskrc
  [2026-01-14 20:25:14] ADD/MOD: TASKDATA: /tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:14] ADD/MOD: LOG_FILE: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
  [2026-01-14 20:25:14] ADD/MOD: Mode: ADD, lines: 1
  [2026-01-14 20:25:14] ADD/MOD: Creating template: [run-20260114-202502-001] Delete template test
  [2026-01-14 20:25:14] ADD/MOD:   Type: periodic, r=PT5S
  [2026-01-14 20:25:14] ADD/MOD:   Template created: status=recurring, rlast=0
  [2026-01-14 20:25:14] ADD/MOD: Hook completed
  [2026-01-14 20:25:14] EXIT: ============================================================
  [2026-01-14 20:25:14] EXIT: on-exit hook started
  [2026-01-14 20:25:14] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3332741/taskrc
  [2026-01-14 20:25:14] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:14] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3332741/data/recurrence_debug.log
  [2026-01-14 20:25:14] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data
  [2026-01-14 20:25:14] EXIT: Found new template: [run-20260114-202502-001] Delete template test
  [2026-01-14 20:25:14] EXIT: Creating instance 1 from 59ed280a-2eda-4327-aaf3-573da7a0d23f
  [2026-01-14 20:25:14] EXIT: Instance command: task rc:/tmp/taskwarrior-recurrence-test-3332741/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3332741/data rc.hooks=off add [run-20260114-202502-001] Delete template test due:20260115T012521Z project:tw.rec.test +dummy +test rtemplate:59ed280a-2eda-4327-aaf3-573da7a0d23f rindex:1
  [2026-01-14 20:25:15] EXIT: Instance 1 created successfully
  [2026-01-14 20:25:15] EXIT: on-exit completed
[INFO] Removed /tmp/taskwarrior-recurrence-test-3332741
[INFO] Environment variables cleared
