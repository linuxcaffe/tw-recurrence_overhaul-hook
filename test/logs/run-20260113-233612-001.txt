Logging to: /home/djp/.task/hooks/recurrence/test/logs/run-20260113-233612-001.txt
Run ID: 20260113-233612-001

════════════════════════════════════════════════════════════════
  Taskwarrior Enhanced Recurrence - Test Suite v0.4.0
════════════════════════════════════════════════════════════════
════════════════════════════════════════════════════════════════
  Setting up test environment
════════════════════════════════════════════════════════════════
[INFO] Test directory: /tmp/taskwarrior-recurrence-test-3163526
[INFO] Hooks: on-exit v0.5.3, on-add v0.5.3
[INFO] Run ID: 20260113-233612-001
[INFO] All test tasks tagged: project:tw.rec.test +test +dummy run:20260113-233612-001
[INFO] Tests will run in isolated environment
[INFO] Debug mode ENABLED - hook logs: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
════════════════════════════════════════════════════════════════
  Running Tests
════════════════════════════════════════════════════════════════
[TEST] Basic template creation
[PASS] Template created
[PASS] First instance created (count: 1)
[PASS] Safety tag +test present
[TEST] Type abbreviations
[PASS] All abbreviations accepted (7/7)
[TEST] Chained tasks reject 'until' dates
[PASS] Chained + until properly rejected
[TEST] Periodic instance #1 matches template due date
[FAIL] Could not export templates
[TEST] Safety tags present on all tasks
[PASS] All 18 tasks have safety tags
════════════════════════════════════════════════════════════════
  Test Summary
════════════════════════════════════════════════════════════════
Total tests:  5
Passed:       6
Failed:       1

Results saved to: /home/djp/.task/hooks/recurrence/test/logs/run-20260113-233612-001.txt

✗ Some tests failed

════════════════════════════════════════════════════════════════
  Cleaning up
════════════════════════════════════════════════════════════════
[HOOK LOG] Last 50 lines:
  [2026-01-13 23:36:13] EXIT: on-exit hook started
  [2026-01-13 23:36:13] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: Found new template: [run-20260113-233612-001] Test periodic
  [2026-01-13 23:36:13] EXIT: Creating instance 1 from 7f630c8c-71fa-49d9-9743-d78951852c1c
  [2026-01-13 23:36:13] EXIT: Instance command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data rc.hooks=off add [run-20260113-233612-001] Test periodic due:20260114T050000Z project:tw.rec.test +dummy +test rtemplate:7f630c8c-71fa-49d9-9743-d78951852c1c rindex:1
  [2026-01-13 23:36:13] EXIT: Instance 1 created successfully
  [2026-01-13 23:36:13] EXIT: on-exit completed
  [2026-01-13 23:36:13] ADD/MOD: ============================================================
  [2026-01-13 23:36:13] ADD/MOD: Hook starting
  [2026-01-13 23:36:13] ADD/MOD: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] ADD/MOD: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] ADD/MOD: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] ADD/MOD: Mode: ADD, lines: 1
  [2026-01-13 23:36:13] ADD/MOD: Creating template: [run-20260113-233612-001] Bad chained
  [2026-01-13 23:36:13] ADD/MOD: ============================================================
  [2026-01-13 23:36:13] ADD/MOD: Hook starting
  [2026-01-13 23:36:13] ADD/MOD: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] ADD/MOD: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] ADD/MOD: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] ADD/MOD: Mode: ADD, lines: 1
  [2026-01-13 23:36:13] ADD/MOD: Creating template: [run-20260113-233612-001] Due test
  [2026-01-13 23:36:13] ADD/MOD:   Type: periodic, r=P30D
  [2026-01-13 23:36:13] ADD/MOD:   Template created: status=recurring, rlast=0
  [2026-01-13 23:36:13] ADD/MOD: Hook completed
  [2026-01-13 23:36:13] EXIT: ============================================================
  [2026-01-13 23:36:13] EXIT: on-exit hook started
  [2026-01-13 23:36:13] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: Found new template: [run-20260113-233612-001] Due test
  [2026-01-13 23:36:13] EXIT: Creating instance 1 from d92e9e67-d123-43be-acc4-828874be5531
  [2026-01-13 23:36:13] EXIT: Instance command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data rc.hooks=off add [run-20260113-233612-001] Due test due:20260210T050000Z project:tw.rec.test +dummy +test rtemplate:d92e9e67-d123-43be-acc4-828874be5531 rindex:1
  [2026-01-13 23:36:13] EXIT: Instance 1 created successfully
  [2026-01-13 23:36:13] EXIT: on-exit completed
  [2026-01-13 23:36:13] EXIT: ============================================================
  [2026-01-13 23:36:13] EXIT: on-exit hook started
  [2026-01-13 23:36:13] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: ============================================================
  [2026-01-13 23:36:13] EXIT: on-exit hook started
  [2026-01-13 23:36:13] EXIT: TASKRC: /tmp/taskwarrior-recurrence-test-3163526/taskrc
  [2026-01-13 23:36:13] EXIT: TASKDATA: /tmp/taskwarrior-recurrence-test-3163526/data
  [2026-01-13 23:36:13] EXIT: LOG_FILE: /tmp/taskwarrior-recurrence-test-3163526/data/recurrence_debug.log
  [2026-01-13 23:36:13] EXIT: Task base command: task rc:/tmp/taskwarrior-recurrence-test-3163526/taskrc rc.data.location=/tmp/taskwarrior-recurrence-test-3163526/data
[INFO] Removed /tmp/taskwarrior-recurrence-test-3163526
[INFO] Environment variables cleared
